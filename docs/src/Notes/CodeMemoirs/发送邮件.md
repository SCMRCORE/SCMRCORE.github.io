---
title: "ğŸŒˆ å‘é€é‚®ä»¶"
desc: "SpringBoot2çš„é‚®ä»¶å‘é€"
tags: "note"
updateTime: "2025-1-22 0:37"
outline: deep
---

# å‘é€é‚®ä»¶

è¿™é‡Œä½¿ç”¨SpringBoot2çš„é‚®ä»¶å‘é€

- å‘é€æ™®é€šçš„é‚®ä»¶
- å‘é€htmlæ ¼å¼é‚®ä»¶
- å‘é€html ä¸­å¸¦å›¾ç‰‡çš„é‚®ä»¶
- å‘é€å¸¦é™„ä»¶çš„é‚®ä»¶

è¿™é‡Œæˆ‘ä»¬ç®€å•è®²è§£ä¸‹ï¼šå‘é€æ™®é€šé‚®ä»¶

**1.å¼•å…¥ä¾èµ–**

```xml
<dependency>
	<groupId>org.springframework.boot</groupId>
	<artifactId>spring-boot-starter-mail</artifactId>
</dependency>
```

**2.æ·»åŠ é…ç½®ä¿¡æ¯**

```yaml
spring:
  mail:
    host: smtp.126.com
    username: é‚®ç®±ç”¨æˆ·å
    password: é‚®ç®±å¯†ç 
    properties:
      mail:
        smtp:
          auth: true  # éœ€è¦éªŒè¯ç™»å½•åå’Œå¯†ç 
        starttls:
          enable: true  # éœ€è¦TLSè®¤è¯ ä¿è¯å‘é€é‚®ä»¶å®‰å…¨éªŒè¯
          required: true
```

**3.å‘é€é‚®ä»¶**

å¼€å‘æ­¥éª¤ï¼š

ç¬¬ä¸€æ­¥ï¼šé€šè¿‡ SimpleMailMessage è®¾ç½®å‘é€é‚®ä»¶ä¿¡æ¯ï¼Œå…·ä½“ä¿¡æ¯å¦‚ä¸‹ï¼š

- å‘é€äººï¼ˆFromï¼‰
- è¢«å‘é€äººï¼ˆToï¼‰
- ä¸»é¢˜ï¼ˆSubjectï¼‰
- å†…å®¹ï¼ˆTextï¼‰

ç¬¬äºŒæ­¥ï¼šå‘é€é‚®ä»¶ï¼šç¤ºä¾‹

```java
package cn.lijunkui.mail;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.stereotype.Service;

@Service
public class MailService {
	
	private final Logger logger = LoggerFactory.getLogger(this.getClass());
	
    @Autowired
    private JavaMailSender sender;
    
    @Value("${spring.mail.username}")
    private String formMail;
    
    public void sendSimpleMail(String toMail,String subject,String content) {
    	 SimpleMailMessage simpleMailMessage = new SimpleMailMessage();
    	 simpleMailMessage.setFrom(formMail);
         simpleMailMessage.setTo(toMail);
         simpleMailMessage.setSubject(subject);
         simpleMailMessage.setText(content);
         try {
             sender.send(simpleMailMessage);
             logger.info("å‘é€ç»™"+toMail+"ç®€å•é‚®ä»¶å·²ç»å‘é€ã€‚ subjectï¼š"+subject);
         }catch (Exception e){
             logger.info("å‘é€ç»™"+toMail+"send mail error subjectï¼š"+subject);
             e.printStackTrace();
         }
    }
}
```

æ¡ˆä¾‹ï¼šå‘é€éªŒè¯ç 

```java
@Override
public Result sendCode(String email) {
    SimpleMailMessage smm = new SimpleMailMessage();       //åˆ›å»ºé‚®ä»¶å¯¹è±¡
    try {
        smm.setSubject("æ³¨å†ŒéªŒè¯ç ");    //è®¾ç½®é‚®ä»¶ä¸»é¢˜
        int code= RandomUtil.randomInt(1000, 9999);
        smm.setText("æ‚¨çš„éªŒè¯ç ä¸ºï¼š" + code);     //ç¼–è¾‘é‚®ä»¶å†…å®¹
        smm.setTo(email);   //è®¾ç½®é‚®ä»¶å‘é€åœ°å€
        smm.setFrom(from);  //è®¾ç½®é‚®ä»¶å‘é€æºå€
        redisTemplate.opsForValue().set(email,code);
        mailSender.send(smm); //å‘é€é‚®ä»¶
        return Result.okResult();
    }catch (Exception e){
        e.printStackTrace();
        return Result.errorResult(AppHttpCodeEnum.CODE_SEND_ERROR);
    }
}
```

å…¶ä½™ä¸‰ç§é‚®ä»¶æ–¹å¼ï¼š

[ç©è½¬ SpringBoot 2 ä¹‹å‘é€é‚®ä»¶ç¯‡_mimemessagehelper.setfrom-CSDNåšå®¢](https://zhuoqianmingyue.blog.csdn.net/article/details/102822405?fromshare=blogdetail&sharetype=blogdetail&sharerId=102822405&sharerefer=PC&sharesource=&sharefrom=from_link)

